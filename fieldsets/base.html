{% set headingSize =
    {
        'huge':   '1',
        'large':  '2',
        'medium': '3',
        'small':  '4',
        'tiny':   '5',
     }
%}

{% set fields =
    [
        'text',
        'email',
        'password',
        'textarea',
        'hidden',
        'number',
        'datetimepicker',
        'heading',
        'html',
        'tags',
        'select',
        'routable',
        'visibility',
        'template',
        'media'
    ]
%}

{% import "plugins/form/fieldsets/macros/grid.html" as grid %}

<div class="{{ grid.col(fieldset.size, fieldset.grid) }}">

    {% if fieldset.header %}
        <div class="header">
            <div class="header-title"><h1 class="{{ fieldset.header.class }}">{{ __(fieldset.header.title) }}</h1></div>
            <div class="header-buttons">{% include "plugins/form/fieldsets/buttons.html" with {"buttons": fieldset.header.buttons} %}</div>
        </div>
    {% endif %}

    {% if fieldset.form.tabs %}
        {% include "plugins/form/fieldsets/tabs-form.html" %}
    {% else %}
        {% include "plugins/form/fieldsets/single-form.html" %}
    {% endif %}

    {% for message in flextype.flash.getMessages()['success'] %}
        <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1050">
          <div id="liveToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="2000" data-bs-autohide="true">
            <div class="toast-body">
              {{ message }}
            </div>
          </div>
        </div>
        <script>document.addEventListener("DOMContentLoaded", function(event) { toastShow(); });</script>
    {% endfor %}

    {% for message in flextype.flash.getMessages()['warning'] %}
        <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1050">
          <div id="liveToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="2000" data-bs-autohide="true">
            <div class="toast-body">
              {{ message }}
            </div>
          </div>
        </div>
        <script>document.addEventListener("DOMContentLoaded", function(event) { toastShow(); });</script>
    {% endfor %}

    {% for message in flextype.flash.getMessages()['error'] %}
        <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1050">
          <div id="liveToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="2000" data-bs-autohide="true">
            <div class="toast-body">
              {{ message }}
            </div>
          </div>
        </div>
        <script>document.addEventListener("DOMContentLoaded", function(event) { toastShow(); });</script>
    {% endfor %}
</div>

<script>
function toastShow() {
    var toastElList = [].slice.call(document.querySelectorAll('.toast'));
    var toastList = toastElList.map(function(toastEl) {
        return new bootstrap.Toast(toastEl)
    });
    toastList.forEach(toast => toast.show());
}
</script>
